<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de RecomendaciÃ³n Inteligente</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸµ Sistema de RecomendaciÃ³n Musical Inteligente</h1>
            <p class="subtitle">Agente adaptativo con aprendizaje por refuerzo</p>
        </header>

        <div class="main-content">
            <!-- Selector de Usuario -->
            <section class="card">
                <h2>ğŸ‘¤ Seleccionar Usuario</h2>
                <div class="user-selector">
                    <select id="userSelect" class="select-user">
                        <option value="">Cargando usuarios...</option>
                    </select>
                    <button id="loadUserBtn" class="btn btn-primary">Cargar Usuario</button>
                    <button id="randomUserBtn" class="btn btn-secondary">Usuario Aleatorio</button>
                </div>
            </section>

            <!-- Estado del Usuario -->
            <section class="card" id="userStateSection" style="display: none;">
                <h2>ğŸ“Š Estado del Usuario <span id="currentUserId"></span></h2>
                <div class="user-state">
                    <div class="state-grid">
                        <div class="state-item">
                            <span class="state-label">Engagement Musical</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="musicEngagement"></div>
                            </div>
                            <span class="state-value" id="musicEngagementValue">0%</span>
                        </div>
                        <div class="state-item">
                            <span class="state-label">Diversidad Musical</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="musicDiversity"></div>
                            </div>
                            <span class="state-value" id="musicDiversityValue">0%</span>
                        </div>
                        <div class="state-item">
                            <span class="state-label">Conectividad Social</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="socialConnectivity"></div>
                            </div>
                            <span class="state-value" id="socialConnectivityValue">0%</span>
                        </div>
                        <div class="state-item">
                            <span class="state-label">Actividad SemÃ¡ntica</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="semanticActivity"></div>
                            </div>
                            <span class="state-value" id="semanticActivityValue">0%</span>
                        </div>
                        <div class="state-item highlight">
                            <span class="state-label">ğŸ¯ SofisticaciÃ³n General</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="overallSophistication"></div>
                            </div>
                            <span class="state-value" id="overallSophisticationValue">0%</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- RecomendaciÃ³n -->
            <section class="card" id="recommendationSection" style="display: none;">
                <h2>ğŸµ Obtener RecomendaciÃ³n</h2>
                <button id="getRecommendationBtn" class="btn btn-large btn-primary">
                    ğŸ² Generar RecomendaciÃ³n
                </button>
                
                <div id="recommendationResult" class="recommendation-result" style="display: none;">
                    <div class="recommendation-card">
                        <div class="artist-info">
                            <h3 id="artistName">-</h3>
                            <p class="artist-id">ID: <span id="artistId">-</span></p>
                        </div>
                        <div class="recommendation-details">
                            <div class="detail-item">
                                <span class="detail-label">Estrategia:</span>
                                <span class="detail-value strategy-badge" id="strategy">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">RazÃ³n:</span>
                                <span class="detail-value" id="reason">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Confianza:</span>
                                <div class="confidence-bar">
                                    <div class="confidence-fill" id="confidenceFill"></div>
                                </div>
                                <span class="detail-value" id="confidence">0%</span>
                            </div>
                        </div>
                        
                        <!-- Feedback -->
                        <div class="feedback-section">
                            <h4>ğŸ’­ Â¿QuÃ© te pareciÃ³ esta recomendaciÃ³n?</h4>
                            <div class="feedback-buttons">
                                <button class="btn btn-success" onclick="submitFeedback('positive')">
                                    ğŸ‘ Me gusta
                                </button>
                                <button class="btn btn-neutral" onclick="submitFeedback('neutral')">
                                    ğŸ˜ Neutral
                                </button>
                                <button class="btn btn-danger" onclick="submitFeedback('negative')">
                                    ğŸ‘ No me gusta
                                </button>
                            </div>
                            <div id="feedbackResult" class="feedback-result"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- EstadÃ­sticas del Agente -->
            <section class="card">
                <h2>ğŸ“ˆ EstadÃ­sticas del Agente</h2>
                <button id="loadStatsBtn" class="btn btn-secondary">Actualizar EstadÃ­sticas</button>
                
                <div id="statisticsContent" class="statistics-content">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ‘¥</div>
                            <div class="stat-value" id="totalUsers">0</div>
                            <div class="stat-label">Usuarios Activos</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ¯</div>
                            <div class="stat-value" id="totalRecommendations">0</div>
                            <div class="stat-label">Recomendaciones</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">â­</div>
                            <div class="stat-value" id="averageReward">0.00</div>
                            <div class="stat-label">Recompensa Promedio</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“Š</div>
                            <div class="stat-value" id="activeSessions">0</div>
                            <div class="stat-label">Sesiones Activas</div>
                        </div>
                    </div>

                    <div class="strategy-performance" id="strategyPerformance">
                        <h3>ğŸ¯ Rendimiento por Estrategia</h3>
                        <div id="strategyStats"></div>
                    </div>
                </div>
            </section>

            <!-- Perfil del Usuario -->
            <section class="card" id="userProfileSection" style="display: none;">
                <h2>ğŸ‘¤ Perfil del Usuario</h2>
                <div id="userProfileContent" class="user-profile-content"></div>
            </section>
        </div>

        <footer>
            <p>Sistema de RecomendaciÃ³n Inteligente v1.0 | Arquitectura en capas con FastAPI + Flask</p>
        </footer>
    </div>

    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="spinner"></div>
        <p>Cargando...</p>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>

